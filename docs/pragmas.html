<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    MISS_HIT - MATLAB independent, small & safe, high integrity tools
  </title>
</head>

<body>
  <header>MISS_HIT 0.9.0-dev Pragmas</header>

  <main>
    <div class="section">
      The behaviour of the <a href="index.html">MISS_HIT</a> tools can
      be controlled with pragmas (special comments that can be placed
      in the source code). This document describes the syntax and
      semantics of the pragmas.
    </div>

    <div class="title">
      <img src="assets/file-text.svg" alt="Picture of text" />
      <h1>One-line trivial pragmas</h1>
    </div>

    <section>
      <h2>Style justification</h2>
      <div>
        You can justify style issues by placing a style justification
        pragma on the same line the message occurs.
        <pre>% mh:ignore_style</pre>
      </div>
    </section>

    <div class="title">
      <img src="assets/file-text.svg" alt="Picture of text" />
      <h1>MISS_HIT Annotation language</h1>
    </div>

    <section>
      <h2>Introducing annotations</h2>
      <div>
        MISS_IT supports a special annotation language embedded inside
        specially formatted MATLAB or Octave comments. An annotation
        is introduce using a comment and the bar (this could easily be
        made configurable, if there is demand):
        <pre>%| some_annotation</pre>
      </div>

      <div>
        Annotations span until the end of the line. Annotations can be
        multi-line as long as there is no other program text between:
<pre>
%| pragma Justification(metric, "npath",
%|                      "multi-line example");
</pre>
      </div>

      <div>
        Annotation must be the first and only program text on a
        line. For example the following program does not contain an
        annotation:
        <pre>x + 1; %| this is not an annotation</pre>
      </div>

      <div>
        Annotations have most of the lexical features of MATLAB,
        except that line continuations and command form do not
        exist. You can even have comments (but not annotations) in
        your annotation:
        <pre>%| some_annotation; % comment</pre>
      </div>

      <h2>Expressions</h2>
      <div>
        Currently, only static string expressions or direct names are
        supported.
      </div>

      <div>
<pre>
a_name ::= IDENTIFIER

a_expression ::= a_name
               | STRING { '+' STRING }
</pre>
      </div>

      <h2>Pragma</h2>
      <div>
        Currently only a single annotation exists: justification
        pragmas. These can appear in any place where normal program
        statement can occur.
      </div>

      <div>
        A miss-hit pragma has the following grammar:
<pre>
annotation_pragma ::= 'pragma' a_name '(' a_pragma_parameters ')' ';'
                    | 'pragma' a_name ';'

a_pragma_parameters ::= a_expression { ',' a_expression }
</pre>
      </div>

      <h3>Justification pragmas</h3>
      <div>
        A justification pragma has the following signature:
        <pre>pragma Justify(TOOL, PARAMETER, REASON);</pre>
        Tool identifies the miss_hit tool and can be one of:
        <ul>
          <li>style</li>
          <li>metric</li>
        </ul>
        The parameter is a tool-dependent identifier. Reason is a
        plain-text human explanation for why this justification is
        reasonable.
      </div>

      <h4>Metric justification pragmas</h4>
      <div>
        A metric justification pragma has the following signature:
        <pre>pragma Justify(metric, METRIC_NAME, REASON);</pre> The
        metric name must be a string to match one of
        the <a href="metrics.html">documented metric names</a>. For example:
<pre>
%| pragma Justify(metric, "npath",
%|                "code impossible to restructure");
</pre>
      </div>

    </section>

  </main>

  <footer>
    Content &copy; 2020 Florian Schanda<br>
    Style &copy; 2019-2020 Alina Boboc<br>
    MISS_HIT is licensed under the GPLv3
  </footer>
</body>

</html>
