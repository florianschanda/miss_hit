<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="style.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    MISS_HIT - MATLAB independent, small & safe, high integrity tools
  </title>
</head>

<body>
  <header>MISS_HIT Code Metrics</header>

  <main>
    <div class="section">
      <a href="index.html">MISS_HIT</a> includes a simple code metric
      tool (<span class="file">mh_metric.py</span>). It computes code
      metrics and complains if the metrics exceed acceptable levels.
    </div>

    <div class="title">
      <img src="assets/settings.svg" alt="Configuration" />
      <h1>Configuration</h1>
    </div>

    <section>
      <h2>Using MISS_HIT Metric</h2>
      <div>
        This tool works exactly the same as the style checker, and
        re-uses the same <a href="style_checker.html">configuration
        files and mechanism</a>.
      </div>

      <div>
        To compute metrics on a single file:
        <pre>$ mh_metric.py my_file.m</pre>
      </div>

      <div>
        To compute metrics for all files in a directory tree:
        <pre>$ mh_metric.py src/</pre>
      </div>

      <div>
        Metrics are reported on standard out. You can also produce a
        HTML report or write the metrics to a text-file:
<pre>
$ mh_metrics src --text=metrics.txt
$ mh_metrics src --html=metrics.html
</pre>
        In a future release more formats (json, csv, etc.) will be
        supported.
      </div>
    </section>

    <section>
      <h2>Configuring and enforcing limits</h2>
      <div>
        By default metrics are just reported. If you want to enforce
        limits on a metric you can do this in the configuration files.
      </div>

      <div>
        For example, to limit the number of paths for each function,
        you add this this to your configuration file:
        <pre>metric "npath": limit 5</pre>
      </div>

      <div>
        As with other configuration, these limits propagate to
        sub-directories. You can change these limits on a more local
        bases (just like with style rules).
      </div>

      <div>
        To turn off limit checking for a specific metric (the default
        for all metrics), you can use the report directive:
        <pre>metric "npath": report</pre> A future release will
        include a mechanism to completely disable a metric as well.
      </div>

      <div>
        In the description for each metric below, the name of the
        metric to use in config files is included in parenthesis.
      </div>
    </section>

    <div class="title">
      <img src="assets/check-square.svg" alt="Justifications" />
      <h1>Justifications</h1>
    </div>

    <section>
      <div>
        Metrics can be justified by placing a justification pragma at
        the level of scope where the violation occurs. Please refer
        to <a href="pragmas.html">MISS_HIT Pragmas</a> for a full
        description of all pragmas understood by MISS_HIT.
      </div>

      <div>
        For example:
        <pre>%| pragma Justify(metric, "npath", "can't be refactored");</pre>
      </div>

      <div>
        Longer justifications can be broken up into several lines:
<pre>
%| pragma Justify(metric, "npath",
%|                "this cannot be refactored " +
%|                "and I am going to tell you " +
%|                "why not...");
</pre>
      </div>

      <div>
        Justifications that are useless generate a warning.
      </div>
    </section>

    <div class="title">
      <img src="assets/bar-chart-2.svg" alt="Metrics" />
      <h1>Metrics</h1>
    </div>

    <section>
      <h2>File metrics</h2>
      <div>
        These metrics are computed for each file.
      </div>

      <h3>Lines ("file_length")</h3>
      <div>
        The number of lines. Should be the equivalent to running the
        standard UNIX tool <span class="file">wc -l</span>. This means
        comments and blank lines are counted.
      </div>

      <div></div>
      <h2>Function metrics</h2>
      <div>
        These metrics are computed for each function, nested function,
        and method.
      </div>

      <h3>Path count ("npath")</h3>
      <div>
        This approximates the number of paths through a function. This
        metric is based
        on <a href="https://dl.acm.org/doi/abs/10.1145/42372.42379">NPATH</a>
        and should be similar what other popular metric tools compute.
      </div>

      <div>
        Note that this number can grow very large, very quickly,
        especially if you have a lot of sequential if blocks. Further
        note that this metric is neither an under-approximate or
        over-approximate, but a reasonable compromise.
      </div>

      <div>
        Since the MATLAB language supports raising and catching
        exceptions (including exceptions further down the call tree) a
        safe over-approximate cannot be reasonably computed since
        every single line may raise multiple exceptions.
      </div>

      <h3>Maximum nestring of control structures ("cnest")</h3>
      <div>
        This measures the maximum level of nesting of
        control. Statements that are considered control statements
        are:
        <ul>
          <li>If statement</li>
          <li>Switch statement</li>
          <li>For loops</li>
          <li>While loops</li>
          <li>Exception handlers</li>
        </ul>
      </div>

    </section>

  </main>

  <footer>
    &copy; 2020 Florian Schanda<br>
    MISS_HIT is licensed under the GPLv3
  </footer>
</body>

</html>
